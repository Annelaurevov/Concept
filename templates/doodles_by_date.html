{% extends "layout.html" %}


{% block main %}
<h1>Doodles for {{ date }}</h1>

<div class="daily-doodles">
    <h2>Doodles</h2>
    <div class="doodle-list">
        {% for doodle in doodles %}
        <div class="doodle-item">
            <img src="{{ url_for('static', filename='doodles/' + doodle.filename) }}" alt="Doodle">
            <a href="{{ url_for('static', filename='doodles/' + doodle.filename) }}" download>Download</a>
        </div>
        {% endfor %}
    </div>
</div>

<h2>Statistics</h2>
<p><strong>Total Likes:</strong> {{ total_likes }}</p>

<h3>Most Popular Doodle(s):</h3>
<div class="art-gallery">
    {% for item in most_liked_doodles %}
    <div class="doodle-item">
        <!-- Gebruik item["doodle"].filename direct -->
        <img src="{{ url_for('static', filename='doodles/' + item['doodle'].filename) }}" 
             alt="Most Liked Doodle" style="max-width: 200px;">

        <!-- Downloadlink -->
        <a href="{{ url_for('static', filename='doodles/' + item['doodle'].filename) }}" download>
            Download
        </a>

        <!-- Aantal likes -->
        <p><strong>Likes:</strong> {{ item['like_count'] }}</p>
    </div>
    {% endfor %}
</div>

<h2>Submissions</h2>
<div class="art-gallery">
    {% for submission, like_count in submissions %}
    <div class="art-card">
        <img src="{{ url_for('static', filename='doodles_user/' + submission.filename) }}" alt="Submission">
        <p>Uploaded by: {{ submission.user.username }}</p>
        <p><strong>Likes:</strong> {{ like_count }}</p>
    </div>
    {% endfor %}
</div>

{% endblock %}